<!-- src/app/views/user/layout/layout.component.html -->
<div class="layout-container">
  <aside class="sidebar">
    <!-- Header modernizado com logo -->
    <div class="sidebar-header">
      <div class="brand-container">
        <img src="assets/images/logo-sem-fundo.png"
             [alt]="'layout.branding.logoAlt' | translate"
             class="brand-logo">
        <div class="brand-text">
          <h2>Courier's Knowledge</h2>
          <span class="brand-tagline">{{ 'layout.branding.tagline' | translate }}</span>
        </div>
      </div>
    </div>

    <!-- Navegação principal (sem divisões) -->
    <nav class="sidebar-nav">
      <!-- Navegação para usuários Immortal -->
      <a routerLink="/app/dashboard" routerLinkActive="active">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
        </svg>
        <span>{{ 'layout.nav.evaluations' | translate }}</span>
      </a>

      <!-- Live Match (condicional para immortal) -->
      <a routerLink="/app/immortal-live"
         routerLinkActive="active"
         *ngIf="userProfile?.isImmortal">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <circle cx="12" cy="12" r="8" fill="currentColor"/>
          <circle cx="12" cy="12" r="3" fill="#1e1e1e"/>
          <circle cx="12" cy="12" r="1" fill="currentColor"/>
        </svg>
        <span>{{ 'layout.nav.immortalLive' | translate }}</span>
      </a>

      <!-- Live Match (para usuários normais) -->
      <a routerLink="/app/live"
         routerLinkActive="active"
         *ngIf="!userProfile?.isImmortal">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <circle cx="12" cy="12" r="8" fill="currentColor"/>
          <circle cx="12" cy="12" r="3" fill="#1e1e1e"/>
        </svg>
        <span>{{ 'layout.nav.live' | translate }}</span>
      </a>

      <!-- Matches (condicional para immortal) -->
      <a routerLink="/app/immortal-matches"
         routerLinkActive="active"
         *ngIf="userProfile?.isImmortal">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M21 3H3C2 3 1 4 1 5v11c0 1 1 2 2 2h6l2 2 2-2h6c1 0 2-1 2-2V5c0-1-1-2-2-2zm-9 12l-4-4h3V8h2v3h3l-4 4z"/>
        </svg>
        <span>{{ 'layout.nav.immortalMatches' | translate }}</span>
      </a>

      <!-- Matches (para usuários normais) -->
      <a routerLink="/app/matches"
         routerLinkActive="active"
         *ngIf="!userProfile?.isImmortal">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19V1h-2v1H7V1H5v1H3.5C2.67 2 2 2.67 2 3.5v16C2 20.33 2.67 21 3.5 21h17c.83 0 1.5-.67 1.5-1.5v-16C22 2.67 21.33 2 20.5 2z"/>
        </svg>
        <span>{{ 'layout.nav.matches' | translate }}</span>
      </a>

      <!-- Friends -->
      <a routerLink="/app/friends" routerLinkActive="active">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M16 7c0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4 4 1.79 4 4zm-4 5c2.67 0 8 1.34 8 4v3H4v-3c0-2.66 5.33-4 8-4z"/>
        </svg>
        <span>{{ 'layout.nav.friends' | translate }}</span>
      </a>

      <!-- Get Premium -->
      <a routerLink="/app/get-premium" routerLinkActive="active" class="premium-link">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <span>{{ 'layout.nav.premium' | translate }}</span>
      </a>

      <!-- Verificação MMR (usuários não-admin) -->
      <a routerLink="/mmr-verification"
         routerLinkActive="active"
         *ngIf="shouldShowMmrVerification">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2L13.09 8.26L22 9L14 14L17 23L12 19L7 23L10 14L2 9L10.91 8.26L12 2Z"/>
        </svg>
        <span>Verificação MMR</span>
      </a>

      <!-- Settings -->
      <a routerLink="/app/settings" routerLinkActive="active">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
        <span>{{ 'layout.nav.settings' | translate }}</span>
      </a>

      <!-- Admin Panel (apenas para usuário ID 1) -->
      <a routerLink="/admin"
         routerLinkActive="active"
         class="admin-link"
         *ngIf="shouldShowAdminMenu">
        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1M10 17L6 13L7.41 11.59L10 14.17L16.59 7.58L18 9L10 17Z"/>
        </svg>
        <span>Painel Admin</span>
        <span class="admin-badge">ADMIN</span>
      </a>
    </nav>

    <!-- Footer do usuário simplificado -->
    <div class="sidebar-footer">
      <a routerLink="/app/profile" class="user-profile-link" *ngIf="userProfile">
        <div class="user-details">
          <img [src]="userProfile.avatarUrl || 'assets/images/logo com óculos.png'"
               [alt]="'layout.user.avatarAlt' | translate"
               class="user-avatar">
          <div class="user-info">
            <div class="user-name">{{ userProfile.steamUsername }}</div>
            <div class="user-status">
              <!-- Status simples -->
              <span class="status-indicator"
                    [ngClass]="{
                      'premium': userProfile.accountStatus === 'Premium',
                      'immortal': userProfile.isImmortal,
                      'admin': userProfile.isAdmin
                    }">
                <span *ngIf="userProfile.isAdmin">Admin </span>
                <span *ngIf="userProfile.isImmortal ">Immortal </span>
                <span *ngIf="userProfile.accountStatus === 'Premium'">Premium </span>
                <span *ngIf="userProfile.accountStatus === 'Free'">Free </span>
              </span>
            </div>
          </div>
        </div>

        <!-- Counter de atualizações apenas para usuários não-admin e não-immortal -->
        <div class="updates-counter">
          <span>Atualizações: {{ getUpdatesCounterText() }}</span>
          <div class="tooltip">
            <i class="info-icon">?</i>
            <span class="tooltip-text">{{ getUpdateLimitTooltip() }}</span>
          </div>
        </div>
      </a>

      <!-- Botão logout -->
      <button class="logout-button" (click)="logout()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
        </svg>
        {{ 'layout.actions.logout' | translate }}
      </button>
    </div>
  </aside>

  <!-- Main content -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>
</div>

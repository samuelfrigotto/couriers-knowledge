<!-- src/app/views/user/get-premium/get-premium.component.html -->
<div class="floating-elements">
  <div class="floating-circle circle-1"></div>
  <div class="floating-circle circle-2"></div>
  <div class="floating-circle circle-3"></div>
</div>

<div class="container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>{{ 'premium.loading' | translate }}</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-container">
    <h3>▲ {{ error }}</h3>
    <button class="retry-btn" (click)="loadPlans()">{{ 'premium.retryButton' | translate }}</button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading">
    <div class="header">
      <h1>{{ 'premium.title' | translate }}</h1>
      <p>{{ 'premium.subtitle' | translate }}</p>
    </div>

    <div class="plans-grid">
      <div
        *ngFor="let plan of plans"
        class="plan-card"
        [class.popular]="plan.popular"
        [class.coming-soon]="plan.comingSoon"
      >
        <h3 class="plan-name">{{ plan.name }}</h3>

        <!-- Preço Principal - CORRIGIDO -->
        <div class="plan-price" *ngIf="plan.price !== null && !plan.comingSoon; else comingSoonPrice">
          {{ plan.display_amount }}
        </div>
        <ng-template #comingSoonPrice>
          <div class="plan-price">{{ 'premium.comingSoon' | translate }}</div>
        </ng-template>

        <div class="plan-period">{{ plan.period }}</div>

        <!-- Equivalente Mensal (se houver) -->
        <div *ngIf="plan.monthly_equivalent && !plan.comingSoon" class="monthly-equivalent">
          {{ plan.monthly_equivalent }}
        </div>

        <!-- Total do Período -->
        <div class="plan-total">
          <div class="plan-total-label">{{ plan.comingSoon ? ('premium.status' | translate) : ('premium.totalPeriod' | translate) }}</div>
          <div class="plan-total-price">{{ plan.total }}</div>
        </div>

        <!-- Features -->
        <ul class="plan-features">
          <li *ngFor="let feature of plan.features">
            <span [class]="feature.included ? 'check-icon' : 'x-icon'">
              {{ feature.included ? '✓' : '✗' }}
            </span>
            {{ feature.text }}
          </li>
        </ul>

        <!-- Action Button -->
        <button
          class="plan-button"
          [class]="plan.buttonClass"
          [class.loading]="isProcessing(plan.id)"
          [disabled]="plan.comingSoon || isProcessing(plan.id)"
          (click)="onSelectPlan(plan)"
        >
          <span *ngIf="!isProcessing(plan.id)">{{ plan.buttonText }}</span>
          <span *ngIf="isProcessing(plan.id)">Processando...</span>
        </button>


        <div class="popular-badge" *ngIf="plan.popular">
          {{ 'premium.mostPopular' | translate }}
        </div>
        <!-- ✅ BADGE EM PRODUÇÃO TRADUZIDA -->
        <div class="coming-soon-badge" *ngIf="plan.comingSoon">
          {{ 'premium.inProduction' | translate }}
        </div>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section">
      <h2 class="faq-title">{{ 'premium.faq.title' | translate }}</h2>

      <div class="faq-grid">
        <div class="faq-item">
          <h4>{{ 'premium.faq.security.title' | translate }}</h4>
          <p>{{ 'premium.faq.security.content' | translate }}</p>
        </div>

        <div class="faq-item">
          <h4>{{ 'premium.faq.export.title' | translate }}</h4>
          <p>{{ 'premium.faq.export.content' | translate }}</p>
        </div>

        <div class="faq-item">
          <h4>{{ 'premium.faq.activation.title' | translate }}</h4>
          <p>{{ 'premium.faq.activation.content' | translate }}</p>
        </div>

        <div class="faq-item">
          <h4>{{ 'premium.faq.features.title' | translate }}</h4>
          <p>{{ 'premium.faq.features.content' | translate }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.loading-container, .error-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 50vh;
  text-align: center;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 4px solid rgba(102, 126, 234, 0.3);
  border-top: 4px solid #667eea;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.retry-btn {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 12px 24px;
  cursor: pointer;
  margin-top: 20px;
  transition: transform 0.2s;
}

.retry-btn:hover {
  transform: translateY(-2px);
}

.monthly-equivalent {
  font-size: 0.9rem;
  color: #34c759;
  margin-top: 5px;
  font-weight: 600;
}

.faq-section {
  margin-top: 80px;
  padding: 60px 40px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.faq-title {
  text-align: center;
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 40px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.faq-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
}

.faq-item {
  background: rgba(255, 255, 255, 0.05);
  padding: 24px;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.faq-item h4 {
  margin-bottom: 12px;
  color: #667eea;
  font-size: 1.1rem;
}

.faq-item p {
  color: #a8a8b3;
  line-height: 1.5;
  margin: 0;
}

.final-cta {
  text-align: center;
  margin-top: 80px;
  padding: 60px 20px;
}

.final-cta h2 {
  font-size: 2.5rem;
  font-weight: 800;
  margin-bottom: 20px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

@media (max-width: 768px) {
  .faq-grid {
    grid-template-columns: 1fr;
  }

  .final-cta h2 {
    font-size: 2rem;
  }
}
</style>
